# ë„¤ì´ë²„ ë¸”ë¡œê·¸ ìë™í™” ì‹œìŠ¤í…œ

> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-27
> **í˜„ì¬ ìƒíƒœ**: âœ… í”„ë¡œë•ì…˜ ë°°í¬ ì™„ë£Œ (Hetzner ì„œë²„)
> **GitHub**: https://github.com/joocy75-hash/Naver-Blog

---

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#2-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ë””ë ‰í† ë¦¬ êµ¬ì¡°](#3-ë””ë ‰í† ë¦¬-êµ¬ì¡°)
4. [ì„¤ì¹˜ ë° ì‹¤í–‰](#4-ì„¤ì¹˜-ë°-ì‹¤í–‰)
5. [ì„œë²„ ë°°í¬ (Hetzner)](#5-ì„œë²„-ë°°í¬-hetzner)
6. [CI/CD ìë™ ë°°í¬](#6-cicd-ìë™-ë°°í¬)
7. [ìš´ì˜ ê°€ì´ë“œ](#7-ìš´ì˜-ê°€ì´ë“œ)
8. [í™˜ê²½ ë³€ìˆ˜ ì„¤ì •](#8-í™˜ê²½-ë³€ìˆ˜-ì„¤ì •)
9. [ì•Œë ¤ì§„ ì´ìŠˆ ë° í•´ê²°ì±…](#9-ì•Œë ¤ì§„-ì´ìŠˆ-ë°-í•´ê²°ì±…)
10. [í–¥í›„ ê°œì„  ì‚¬í•­](#10-í–¥í›„-ê°œì„ -ì‚¬í•­)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ëª©ì 
AI ê¸°ë°˜ ë„¤ì´ë²„ ë¸”ë¡œê·¸ ìë™ í¬ìŠ¤íŒ… ì‹œìŠ¤í…œ
- ì‹¤ì‹œê°„ ë‰´ìŠ¤/íŠ¸ë Œë“œ ìˆ˜ì§‘ â†’ AI ê¸€ ìƒì„± â†’ ì´ë¯¸ì§€ ìƒì„± â†’ ìë™ ë°œí–‰
- 24ì‹œê°„ ë¬´ì¸ ìš´ì˜ (1-2ì‹œê°„ ê°„ê²©, ì¼ì¼ ìµœëŒ€ 12ê°œ)
- ë³¸ë¬¸ ì¤‘ê°„ì— ì´ë¯¸ì§€ 3-4ê°œ ìë™ ì‚½ì…

### 1.2 í˜ë¥´ì†Œë‚˜
- **ìŠ¤ë§ˆíŠ¸ê°œë¯¸ ì½”ì¸ë´‡**: ì•”í˜¸í™”í/íˆ¬ì ì „ë¬¸ ë¸”ë¡œê±°
- ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆì±„íŒ… ìœ ë„ ë§ˆì¼€íŒ…

### 1.3 ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ì„±ìš”ì†Œ | ê¸°ìˆ  |
|---------|------|
| ì–¸ì–´ | Python 3.11+ |
| ë¸Œë¼ìš°ì € ìë™í™” | Playwright (Chromium) |
| ì½˜í…ì¸  ìƒì„± | Claude API (Haiku/Sonnet) |
| ë¦¬ì„œì¹˜ | Perplexity API |
| ì´ë¯¸ì§€ ìƒì„± | Google Gemini Imagen 3 |
| ìŠ¤ì¼€ì¤„ë§ | APScheduler |
| ì•Œë¦¼ | Telegram Bot API |
| ì»¨í…Œì´ë„ˆ | Docker + Docker Compose |
| CI/CD | GitHub Actions |
| ì„œë²„ | Hetzner CPX31 (4 vCPU / 8 GB RAM) |

### 1.4 ê³„ì • ì •ë³´
```
ë„¤ì´ë²„ ID: wncksdid0750
ë¸”ë¡œê·¸ URL: https://blog.naver.com/pakrsojang
```

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì „ì²´ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ìë™ ìŠ¤ì¼€ì¤„ëŸ¬                              â”‚
â”‚                   (scheduler/auto_scheduler.py)                  â”‚
â”‚                     1-2ì‹œê°„ ê°„ê²© ì‹¤í–‰                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      íŒŒì´í”„ë¼ì¸ (pipeline.py)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ ë¦¬ì„œì¹˜      â”‚â†’â”‚ ì½˜í…ì¸  ìƒì„±  â”‚â†’â”‚ ì´ë¯¸ì§€ ìƒì„±  â”‚              â”‚
â”‚  â”‚ (Perplexity)â”‚  â”‚ (Claude)    â”‚  â”‚ (Gemini)    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ë¸”ë¡œê·¸ í¬ìŠ¤í„° (auto_post.py)                   â”‚
â”‚  ì„¸ì…˜ ë¡œë“œ â†’ ê¸€ì“°ê¸° â†’ ì´ë¯¸ì§€ ì‚½ì… â†’ ë°œí–‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í…”ë ˆê·¸ë¨ ì•Œë¦¼ (utils/telegram_notifier.py)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 AI ì—ì´ì „íŠ¸ êµ¬ì„±

| ì—ì´ì „íŠ¸ | íŒŒì¼ | ì—­í•  |
|---------|------|------|
| Research Agent | agents/research_agent.py | Perplexity APIë¡œ ì‹¤ì‹œê°„ ë‰´ìŠ¤/íŠ¸ë Œë“œ ìˆ˜ì§‘ |
| Content Agent | agents/content_agent.py | Claude Haiku/Sonnetìœ¼ë¡œ ë¸”ë¡œê·¸ ê¸€ ìƒì„± |
| Visual Agent | agents/visual_agent.py | ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ìƒì„± |
| QA Agent | agents/qa_agent.py | ì½˜í…ì¸  í’ˆì§ˆ ê²€ì¦ (70ì  ë¯¸ë§Œ ì¬ìƒì„±) |
| Upload Agent | agents/upload_agent.py | ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì—…ë¡œë“œ |

---

## 3. ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
ë„¤ì´ë²„ë¸”ë¡œê·¸ë´‡/
â”œâ”€â”€ main.py                      # ë©”ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”œâ”€â”€ pipeline.py                  # í†µí•© íŒŒì´í”„ë¼ì¸ (í•µì‹¬)
â”œâ”€â”€ auto_post.py                 # ë„¤ì´ë²„ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… (í•µì‹¬)
â”œâ”€â”€ manual_login_clipboard.py    # ìˆ˜ë™ ë¡œê·¸ì¸ (ì„¸ì…˜ ì €ì¥ìš©)
â”‚
â”œâ”€â”€ agents/                      # AI ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ research_agent.py        # ë¦¬ì„œì¹˜ (Perplexity)
â”‚   â”œâ”€â”€ content_agent.py         # ì½˜í…ì¸  ìƒì„± (Claude)
â”‚   â”œâ”€â”€ visual_agent.py          # ë¹„ì£¼ì–¼ ìƒì„±
â”‚   â”œâ”€â”€ qa_agent.py              # í’ˆì§ˆ ê²€ì¦
â”‚   â”œâ”€â”€ upload_agent.py          # ì—…ë¡œë“œ
â”‚   â”œâ”€â”€ marketing_content.py     # ë§ˆì¼€íŒ… ì½˜í…ì¸ 
â”‚   â””â”€â”€ blog_content_generator.py # ë‹¤ëª©ì  ìƒì„±ê¸°
â”‚
â”œâ”€â”€ scheduler/                   # ìŠ¤ì¼€ì¤„ë§
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ auto_scheduler.py        # 24ì‹œê°„ ìë™ ìŠ¤ì¼€ì¤„ëŸ¬ (ì—”íŠ¸ë¦¬í¬ì¸íŠ¸)
â”‚   â””â”€â”€ topic_rotator.py         # ì£¼ì œ ìˆœí™˜
â”‚
â”œâ”€â”€ utils/                       # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ gemini_image.py          # Imagen ì´ë¯¸ì§€ ìƒì„±
â”‚   â”œâ”€â”€ telegram_notifier.py     # í…”ë ˆê·¸ë¨ ì•Œë¦¼
â”‚   â”œâ”€â”€ clipboard_input.py       # í´ë¦½ë³´ë“œ ì…ë ¥ (í—¤ë“œë¦¬ìŠ¤ í˜¸í™˜)
â”‚   â”œâ”€â”€ human_behavior.py        # ì¸ê°„ í–‰ë™ ì‹œë®¬ë ˆì´ì…˜
â”‚   â”œâ”€â”€ cost_optimizer.py        # API ë¹„ìš© ìµœì í™”
â”‚   â””â”€â”€ error_recovery.py        # ì—ëŸ¬ ë³µêµ¬
â”‚
â”œâ”€â”€ security/                    # ë³´ì•ˆ
â”‚   â”œâ”€â”€ credential_manager.py    # API í‚¤ ê´€ë¦¬ (macOS í‚¤ì²´ì¸)
â”‚   â””â”€â”€ session_manager.py       # ì„¸ì…˜ ê´€ë¦¬ (ì•”í˜¸í™”)
â”‚
â”œâ”€â”€ config/                      # ì„¤ì •
â”‚   â”œâ”€â”€ settings.py              # í™˜ê²½ ì„¤ì •
â”‚   â””â”€â”€ human_timing.py          # íƒ€ì´ë° ì„¤ì •
â”‚
â”œâ”€â”€ models/                      # ë°ì´í„°
â”‚   â””â”€â”€ database.py              # SQLite DB
â”‚
â”œâ”€â”€ monitoring/                  # ëª¨ë‹ˆí„°ë§
â”‚   â”œâ”€â”€ health_checker.py        # í—¬ìŠ¤ì²´í¬
â”‚   â””â”€â”€ reporter.py              # í†µê³„ ë¦¬í¬í„°
â”‚
â”œâ”€â”€ deploy/                      # ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ server-init.sh           # ì„œë²„ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ setup-github-secrets.sh  # GitHub Secrets ì„¤ì •
â”‚   â”œâ”€â”€ deploy-to-server.sh      # ì›í´ë¦­ ë°°í¬
â”‚   â””â”€â”€ setup-env-interactive.sh # ëŒ€í™”í˜• .env ì„¤ì •
â”‚
â”œâ”€â”€ .github/workflows/
â”‚   â””â”€â”€ deploy.yml               # CI/CD íŒŒì´í”„ë¼ì¸
â”‚
â”œâ”€â”€ Dockerfile                   # Docker ì´ë¯¸ì§€ (Playwright ê¸°ë°˜)
â”œâ”€â”€ docker-compose.yml           # Docker Compose ì„¤ì •
â”œâ”€â”€ requirements.txt             # Python ì˜ì¡´ì„±
â”œâ”€â”€ .env.example                 # í™˜ê²½ë³€ìˆ˜ ì˜ˆì‹œ
â””â”€â”€ .gitignore                   # Git ì œì™¸ ëª©ë¡
```

---

## 4. ì„¤ì¹˜ ë° ì‹¤í–‰

### 4.1 ë¡œì»¬ ê°œë°œ í™˜ê²½

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/joocy75-hash/Naver-Blog.git
cd Naver-Blog

# ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv
source venv/bin/activate  # macOS/Linux
# or: venv\Scripts\activate  # Windows

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜
playwright install chromium

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘í•˜ì—¬ API í‚¤ ì…ë ¥
```

### 4.2 ì„¸ì…˜ ë¡œê·¸ì¸ (ìµœì´ˆ 1íšŒ)

```bash
python manual_login_clipboard.py
# ë¸Œë¼ìš°ì €ê°€ ì—´ë¦¬ë©´ ë„¤ì´ë²„ ë¡œê·¸ì¸ ìˆ˜í–‰
# ë¡œê·¸ì¸ í›„ ìë™ìœ¼ë¡œ ì„¸ì…˜ ì €ì¥ë¨
```

### 4.3 ì‹¤í–‰ ë°©ë²•

```bash
# 1íšŒ í…ŒìŠ¤íŠ¸ (ë°œí–‰ ì•ˆ í•¨)
python pipeline.py research --dry

# ì‹¤ì œ ë°œí–‰
python pipeline.py research

# 24ì‹œê°„ ìë™ ìŠ¤ì¼€ì¤„ëŸ¬
python -m scheduler.auto_scheduler

# ì»¤ìŠ¤í…€ ì„¤ì • (1-2ì‹œê°„ ê°„ê²©, ì¼ì¼ 10ê°œ)
python -m scheduler.auto_scheduler --interval 1 2 --limit 10
```

---

## 5. ì„œë²„ ë°°í¬ (Hetzner)

### 5.1 ì„œë²„ ì •ë³´

| í•­ëª© | ê°’ |
|------|-----|
| **ì„œë²„ IP** | 5.161.112.248 |
| **ì„œë²„ ì´ë¦„** | deep-server |
| **ìœ„ì¹˜** | Ashburn, VA (USA) |
| **ì‚¬ì–‘** | CPX31 (4 vCPU / 8 GB RAM / 160 GB SSD) |
| **OS** | Ubuntu 24.04 LTS |
| **ë°°í¬ ê²½ë¡œ** | ~/service_b/naver-blog-bot |
| **ë¦¬ì†ŒìŠ¤ í• ë‹¹** | CPU 1.5ì½”ì–´, ë©”ëª¨ë¦¬ 2GB (Group B) |

### 5.2 ì›í´ë¦­ ë°°í¬ (ê¶Œì¥)

```bash
# Step 1: GitHub Secrets ì„¤ì •
./deploy/setup-github-secrets.sh

# Step 2: ì„œë²„ ì´ˆê¸°í™” ë° ë°°í¬
./deploy/deploy-to-server.sh

# Step 3: GitHub Push â†’ ìë™ ë°°í¬
git add . && git commit -m "Deploy" && git push origin main
```

### 5.3 ìˆ˜ë™ ë°°í¬

```bash
# SSH ì ‘ì†
ssh root@5.161.112.248

# í”„ë¡œì íŠ¸ í´ë¡ 
git clone https://github.com/joocy75-hash/Naver-Blog.git ~/service_b/naver-blog-bot
cd ~/service_b/naver-blog-bot

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
vim .env  # API í‚¤ ì…ë ¥

# Docker ì‹¤í–‰
docker compose up -d
```

### 5.4 ì„œë²„ ì´ì „ ì‹œ

**ìƒˆ ì„œë²„ì—ì„œ í•„ìš”í•œ ê²ƒ:**
1. git clone (ì½”ë“œëŠ” GitHubì—ì„œ)
2. .env íŒŒì¼ ì„¤ì • (API í‚¤, ë¹„ë°€ë²ˆí˜¸)
3. docker compose up -d

**GitHub Secrets ì—…ë°ì´íŠ¸ (CI/CDìš©):**
- HETZNER_HOST â†’ ìƒˆ ì„œë²„ IP
- HETZNER_SSH_KEY â†’ ìƒˆ SSH í‚¤

---

## 6. CI/CD ìë™ ë°°í¬

### 6.1 ì›Œí¬í”Œë¡œìš° êµ¬ì¡°

```
main ë¸Œëœì¹˜ Push
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Test & Lint      â”‚  flake8, black, mypy (1ë¶„ 30ì´ˆ)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Build Docker     â”‚  ì´ë¯¸ì§€ ë¹Œë“œ (6ë¶„)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Deploy to Server â”‚  SSHë¡œ ì„œë²„ ë°°í¬ (2ë¶„)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Send Notificationâ”‚  Telegram ì•Œë¦¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 GitHub Secrets ì„¤ì •

| Secret ì´ë¦„ | ê°’ | ì„¤ëª… |
|------------|-----|------|
| HETZNER_HOST | 5.161.112.248 | ì„œë²„ IP |
| HETZNER_USER | root | SSH ì‚¬ìš©ì |
| HETZNER_SSH_KEY | (ê°œì¸í‚¤ ë‚´ìš©) | SSH ê°œì¸í‚¤ ì „ì²´ |
| TELEGRAM_BOT_TOKEN | (ì„ íƒ) | ì•Œë¦¼ìš© |
| TELEGRAM_CHAT_ID | (ì„ íƒ) | ì•Œë¦¼ìš© |

### 6.3 ë°°í¬ íŠ¸ë¦¬ê±°

```bash
# ì½”ë“œ ìˆ˜ì • í›„ Pushí•˜ë©´ ìë™ ë°°í¬
git add .
git commit -m "Fix: something"
git push origin main

# GitHub Actions ìƒíƒœ í™•ì¸
gh run list --repo joocy75-hash/Naver-Blog
```

---

## 7. ìš´ì˜ ê°€ì´ë“œ

### 7.1 ì„œë¹„ìŠ¤ ê´€ë¦¬ ëª…ë ¹ì–´

```bash
# SSH ì ‘ì†
ssh root@5.161.112.248

# ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker ps

# ë¡œê·¸ í™•ì¸ (ì‹¤ì‹œê°„)
docker logs naver-blog-bot -f

# ì¬ì‹œì‘
cd ~/service_b/naver-blog-bot
docker compose restart

# ì¤‘ì§€
docker compose down

# ì´ë¯¸ì§€ ì¬ë¹Œë“œ
docker compose build --no-cache && docker compose up -d
```

### 7.2 ë¡œê·¸ í™•ì¸

```bash
# Docker ë¡œê·¸
docker logs naver-blog-bot --tail 100

# ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸
tail -f ~/service_b/naver-blog-bot/logs/*.log
```

### 7.3 ëª¨ë‹ˆí„°ë§

```bash
# Docker ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
docker stats

# ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤
htop

# ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰
df -h

# ë©”ëª¨ë¦¬ í™•ì¸
free -h
```

### 7.4 í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì‹œìŠ¤í…œ (ê°•í™” ë²„ì „)

#### 7.4.1 ì•Œë¦¼ ë ˆë²¨

| ë ˆë²¨ | ì´ëª¨ì§€ | ì„¤ëª… | ì¿¨ë‹¤ìš´ |
|------|--------|------|--------|
| INFO | â„¹ï¸ | ì •ë³´ì„± ì•Œë¦¼ | 30ë¶„ |
| SUCCESS | âœ… | ì„±ê³µ ì•Œë¦¼ | ì¦‰ì‹œ |
| WARNING | âš ï¸ | ê²½ê³  ì•Œë¦¼ | 10ë¶„ |
| ERROR | âŒ | ì˜¤ë¥˜ ì•Œë¦¼ | 5ë¶„ |
| CRITICAL | ğŸš¨ | ì‹¬ê°í•œ ì˜¤ë¥˜ | ì¦‰ì‹œ |

#### 7.4.2 ì•Œë¦¼ ì¢…ë¥˜

| ìƒí™© | ì•Œë¦¼ ë©”ì„œë“œ | íŠ¸ë¦¬ê±° |
|------|------------|--------|
| í¬ìŠ¤íŒ… ì„±ê³µ/ì‹¤íŒ¨ | `send_post_success/failure()` | í¬ìŠ¤íŒ… ì™„ë£Œ ì‹œ |
| ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ | `send_system_status()` | CPU/ë©”ëª¨ë¦¬/ë””ìŠ¤í¬ ê²½ê³  ì‹œ |
| API ìƒíƒœ | `send_api_status()` | ì‘ë‹µ ëŠë¦¼ ë˜ëŠ” ì˜¤ë¥˜ ì‹œ |
| ì„¸ì…˜ ë§Œë£Œ | `send_session_warning()` | ì„¸ì…˜ ë§Œë£Œ 1~3ì¼ ì „ |
| ì—ëŸ¬ ë¶„ì„ | `send_error_analysis()` | ì—ëŸ¬ ë°œìƒ ì‹œ (ê¶Œì¥ ì¡°ì¹˜ í¬í•¨) |
| í—¬ìŠ¤ì²´í¬ | `send_health_check_result()` | WARNING/CRITICAL ê°ì§€ ì‹œ |
| Rate Limit | `send_rate_limit_warning()` | ì‚¬ìš©ëŸ‰ 80%/95% ë„ë‹¬ ì‹œ |
| ì¼ì‹œì •ì§€ | `send_alert()` | ì—°ì† 3íšŒ ì—ëŸ¬ ì‹œ |
| ë³µêµ¬ ì„±ê³µ | `send_recovery_notification()` | ìë™ ë³µêµ¬ ì™„ë£Œ ì‹œ |
| ì‹œì‘/ì¢…ë£Œ | `send_startup/shutdown_alert()` | ë´‡ ì‹œì‘/ì¢…ë£Œ ì‹œ |

#### 7.4.3 ëª¨ë‹ˆí„°ë§ ì£¼ê¸°

| ì£¼ê¸° | ì‘ì—… | ì•Œë¦¼ ì¡°ê±´ |
|------|------|----------|
| 15ë¶„ | ë¹ ë¥¸ ë¦¬ì†ŒìŠ¤ ì²´í¬ | CPU 70%â†‘, ë©”ëª¨ë¦¬ 80%â†‘, ë””ìŠ¤í¬ 85%â†‘ |
| 1ì‹œê°„ | ì „ì²´ í—¬ìŠ¤ì²´í¬ | API/DB/ì„¸ì…˜ ë¬¸ì œ ê°ì§€ ì‹œ |
| 3ì‹œê°„ | ì„¸ì…˜ ìƒíƒœ ì²´í¬ | ë§Œë£Œ 3ì¼ ì „ë¶€í„° ê²½ê³  |
| ë§¤ì¼ 21:00 | ì¼ê°„ ë¦¬í¬íŠ¸ | í•­ìƒ (í†µê³„) |
| ë§¤ì£¼ ì¼ìš”ì¼ 20:00 | ì£¼ê°„ ë¦¬í¬íŠ¸ | í•­ìƒ (í†µê³„) |

#### 7.4.4 ì•Œë¦¼ ì˜ˆì‹œ

**ì‹œì‘ ì•Œë¦¼:**
```
ğŸš€ ë¸”ë¡œê·¸ ë´‡ ì‹œì‘

ğŸ‘¤ ê³„ì •: wncksdid0750
â° í¬ìŠ¤íŒ… ê°„ê²©: 1-2ì‹œê°„
ğŸ“Š ì¼ì¼ ì œí•œ: 12ê°œ
ğŸ¤– ëª¨ë¸: haiku

ğŸ“Š ì‹œìŠ¤í…œ ìƒíƒœ:
  â€¢ CPU: 15.2%
  â€¢ ë©”ëª¨ë¦¬: 45.3%
  â€¢ ë””ìŠ¤í¬: 32.1%

âœ… í—¬ìŠ¤ì²´í¬: HEALTHY
```

**ì—ëŸ¬ ë¶„ì„ ì•Œë¦¼:**
```
âš ï¸ ì—ëŸ¬ ë°œìƒ

ì—ëŸ¬ ìœ í˜•: session_expired
ë‚´ìš©: ë„¤ì´ë²„ ë¡œê·¸ì¸ ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤
ë°œìƒ íšŸìˆ˜: 2íšŒ
ìµœì´ˆ ë°œìƒ: 14:23:45

ğŸ’¡ ê¶Œì¥ ì¡°ì¹˜:
ì„¸ì…˜ ì¬ë¡œê·¸ì¸
ë„¤ì´ë²„ ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ì¬ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.
âš ï¸ ìˆ˜ë™ ì¡°ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.
```

**ì¼ì‹œì •ì§€ ì•Œë¦¼:**
```
ğŸš¨ ìë™ í¬ìŠ¤íŒ… ì¼ì‹œì •ì§€

ì—°ì† ì—ëŸ¬ 3íšŒ ë°œìƒìœ¼ë¡œ ì¼ì‹œì •ì§€ë©ë‹ˆë‹¤.

â± ì¿¨ë‹¤ìš´: 30ë¶„
ğŸ• ì¬ê°œ ì˜ˆì •: 15:30:00

ğŸ“Š ì—ëŸ¬ ìœ í˜•ë³„ í†µê³„:
  â€¢ session_expired: 2íšŒ
  â€¢ network_error: 1íšŒ

ğŸ“‹ ìµœê·¼ ì—ëŸ¬:
1. [session_expired] ì„¸ì…˜ ë§Œë£Œ...
2. [network_error] ì—°ê²° ì‹¤íŒ¨...
3. [session_expired] ë¡œê·¸ì¸ í•„ìš”...

ğŸ’¡ ê¶Œì¥ ì¡°ì¹˜:
ì„¸ì…˜ ì¬ë¡œê·¸ì¸
ë„¤ì´ë²„ ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ì¬ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.
```

**í—¬ìŠ¤ì²´í¬ ê²½ê³ :**
```
ğŸŸ¡ ì‹œìŠ¤í…œ í—¬ìŠ¤ì²´í¬ ê²½ê³ 

ì»´í¬ë„ŒíŠ¸ ìƒíƒœ:
  âœ… claude_api: Claude API ì—°ê²° ì •ìƒ (245ms)
  âœ… perplexity_api: Perplexity API í‚¤ ì„¤ì •ë¨
  âš ï¸ memory: ë©”ëª¨ë¦¬ ë†’ìŒ: 82.5% ì‚¬ìš© ì¤‘
  âœ… disk_space: ë””ìŠ¤í¬ ê³µê°„ ì •ìƒ (45.2GB ë‚¨ìŒ)
  âœ… database: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ìƒ (12ms)

âŒ ë¬¸ì œ ì»´í¬ë„ŒíŠ¸: memory
```

---

## 8. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### 8.1 í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ (.env)

```env
# ===================
# Naver ê³„ì • ì •ë³´
# ===================
NAVER_ID=your_naver_id
NAVER_PW=your_naver_password

# ===================
# AI API Keys
# ===================
ANTHROPIC_API_KEY=sk-ant-xxxxx
GOOGLE_API_KEY=AIzaSyxxxxx
GCP_PROJECT_ID=your-project-id
GCP_LOCATION=us-central1
PERPLEXITY_API_KEY=pplx-xxxxx

# ===================
# ë°ì´í„°ë² ì´ìŠ¤
# ===================
DATABASE_URL=sqlite:///./data/blog_bot.db

# ===================
# í…”ë ˆê·¸ë¨ ì•Œë¦¼
# ===================
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHI
TELEGRAM_CHAT_ID=your_chat_id

# ===================
# Rate Limiting
# ===================
MAX_DAILY_POSTS=12
MIN_POST_INTERVAL_HOURS=1
API_COOLDOWN_SECONDS=60

# ===================
# í”„ë¡œë•ì…˜ ì„¤ì •
# ===================
DEBUG=False
TEST_MODE=False
HEADLESS=True
LOG_LEVEL=INFO
```

### 8.2 í™˜ê²½ ë³€ìˆ˜ ìˆ˜ì • (ì„œë²„)

```bash
ssh root@5.161.112.248
cd ~/service_b/naver-blog-bot
vim .env
docker compose restart
```

---

## 9. ì•Œë ¤ì§„ ì´ìŠˆ ë° í•´ê²°ì±…

### 9.1 AsyncIOScheduler ë¹„ë™ê¸° ì‹¤í–‰ ë¬¸ì œ (í•´ê²°ë¨ - 2025-12-27)

**ì¦ìƒ**: ìŠ¤ì¼€ì¤„ëŸ¬ê°€ 24ì‹œê°„ ê°€ë™ë˜ì—ˆìœ¼ë‚˜ í¬ìŠ¤íŒ… 0ê°œ, í…”ë ˆê·¸ë¨ ì•Œë¦¼ 0ê°œ

- ë¡œê·¸ì— `RuntimeWarning: coroutine was never awaited` ê²½ê³  ë‹¤ìˆ˜ ë°œìƒ
- `_post_job`, `_run_health_check` ë“± async í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: `BackgroundScheduler`(ë™ê¸°ì‹)ë¡œ `async def` í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œ

- APSchedulerì˜ BackgroundSchedulerëŠ” ë™ê¸° ìŠ¤ì¼€ì¤„ëŸ¬
- async í•¨ìˆ˜ë¥¼ ì§ì ‘ ë“±ë¡í•˜ë©´ ì½”ë£¨í‹´ ê°ì²´ë§Œ ë°˜í™˜ë˜ê³  ì‹¤ì œ ì‹¤í–‰ì´ ì•ˆ ë¨

**í•´ê²°**: `AsyncIOScheduler`ë¡œ ë³€ê²½ (async í•¨ìˆ˜ ë„¤ì´í‹°ë¸Œ ì§€ì›)
```python
# ë³€ê²½ ì „
from apscheduler.schedulers.background import BackgroundScheduler
self.scheduler = BackgroundScheduler()

# ë³€ê²½ í›„
from apscheduler.schedulers.asyncio import AsyncIOScheduler
self.scheduler = AsyncIOScheduler()
```

**ìˆ˜ì •ëœ íŒŒì¼**:

- `scheduler/auto_scheduler.py`: AsyncIOScheduler ì ìš©, ë¹„ë™ê¸° ë©”ì¸ ë£¨í”„ êµ¬í˜„
- `utils/error_recovery.py`: `asyncio.create_task()` ì•ˆì „ í˜¸ì¶œ ì²˜ë¦¬

### 9.2 ì·¨ì†Œì„  ë²„ê·¸ (í•´ê²°ë¨)

**ì¦ìƒ**: ë³¸ë¬¸ ì…ë ¥ ì‹œ ì·¨ì†Œì„  ì„œì‹ì´ ì ìš©ë¨

**í•´ê²°**: se-is-selected í´ë˜ìŠ¤ë¡œ í™œì„±í™” ìƒíƒœ ê°ì§€
```javascript
const btn = document.querySelector('button.se-strikethrough-toolbar-button');
if (btn && btn.classList.contains('se-is-selected')) {
    btn.click();
}
```

### 9.2 pyautogui DISPLAY ì˜¤ë¥˜ (í•´ê²°ë¨)

**ì¦ìƒ**: í—¤ë“œë¦¬ìŠ¤ ì„œë²„ì—ì„œ KeyError: 'DISPLAY'

**í•´ê²°**: utils/clipboard_input.pyì—ì„œ ì¡°ê±´ë¶€ import
```python
_headless_mode = os.environ.get('HEADLESS', 'False').lower() == 'true' or 'DISPLAY' not in os.environ
if _headless_mode:
    pyautogui = None
```

### 9.3 ì„¸ì…˜ ë§Œë£Œ

**ì¦ìƒ**: ë¡œê·¸ì¸ ì‹¤íŒ¨, ì„¸ì…˜ ë¬´íš¨

**í•´ê²°**: ë¡œì»¬ì—ì„œ ìˆ˜ë™ ë¡œê·¸ì¸ í›„ ì„¸ì…˜ íŒŒì¼ ì„œë²„ë¡œ ì „ì†¡
```bash
# ë¡œì»¬ì—ì„œ
python manual_login_clipboard.py

# ì„œë²„ë¡œ ì „ì†¡
scp data/sessions/*.encrypted root@5.161.112.248:~/service_b/naver-blog-bot/data/sessions/
```

### 9.4 ë©”ëª¨ë¦¬ ë¶€ì¡±

**ì¦ìƒ**: ì»¨í…Œì´ë„ˆ OOMKilled

**í•´ê²°**:
```bash
# ë¶ˆí•„ìš”í•œ ì´ë¯¸ì§€ ì •ë¦¬
docker system prune -a

# Swap í™•ì¸
swapon --show
```

---

## 10. í–¥í›„ ê°œì„  ì‚¬í•­

### 10.1 ìš°ì„ ìˆœìœ„ ë†’ìŒ
- [ ] ì„¸ì…˜ ìë™ ê°±ì‹  ì‹œìŠ¤í…œ
- [ ] ì—ëŸ¬ ë³µêµ¬ ë¡œì§ ê°•í™”
- [ ] ì¤‘ë³µ ì£¼ì œ ë°©ì§€

### 10.2 ìš°ì„ ìˆœìœ„ ì¤‘ê°„
- [ ] ì›¹ ëŒ€ì‹œë³´ë“œ (ëª¨ë‹ˆí„°ë§ UI)
- [ ] í…”ë ˆê·¸ë¨ ì›ê²© ì œì–´
- [ ] ë‹¤ì¤‘ ê³„ì • ìˆœí™˜ í¬ìŠ¤íŒ…

### 10.3 ìš°ì„ ìˆœìœ„ ë‚®ìŒ
- [ ] SEO ìµœì í™”
- [ ] í†µê³„ ë° ë¶„ì„ ê¸°ëŠ¥
- [ ] ë‹¤ì–‘í•œ ì½˜í…ì¸  ì¹´í…Œê³ ë¦¬ ì¶”ê°€

---

## ë¶€ë¡: ì£¼ìš” íŒŒì¼ ìš”ì•½

| íŒŒì¼ | ì—­í•  | í•µì‹¬ í•¨ìˆ˜ |
|------|------|----------|
| auto_post.py | ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… ìë™í™” | NaverBlogPoster.post() |
| pipeline.py | ì „ì²´ íŒŒì´í”„ë¼ì¸ | run_marketing(), run_research() |
| scheduler/auto_scheduler.py | 24ì‹œê°„ ìŠ¤ì¼€ì¤„ëŸ¬ | AutoPostingScheduler.start() |
| utils/gemini_image.py | ì´ë¯¸ì§€ ìƒì„± | generate_image() |
| manual_login_clipboard.py | ì„¸ì…˜ ì €ì¥ | ìˆ˜ë™ ë¡œê·¸ì¸ |

---

## ë¶€ë¡: ë¹ ë¥¸ ëª…ë ¹ì–´ ì°¸ì¡°

```bash
# SSH ì ‘ì†
ssh root@5.161.112.248

# ì»¨í…Œì´ë„ˆ ìƒíƒœ
docker ps

# ë¡œê·¸ (ì‹¤ì‹œê°„)
docker logs naver-blog-bot -f

# ì¬ì‹œì‘
cd ~/service_b/naver-blog-bot && docker compose restart

# ì´ë¯¸ì§€ ì¬ë¹Œë“œ
docker compose build --no-cache && docker compose up -d

# GitHub Actions ìƒíƒœ
gh run list --repo joocy75-hash/Naver-Blog
```

---

## ë²•ì  ê³ ì§€

ë³¸ ì‹œìŠ¤í…œì€ **êµìœ¡ ë° ì—°êµ¬ ëª©ì **ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
ë„¤ì´ë²„ ì´ìš©ì•½ê´€ì„ ì¤€ìˆ˜í•´ì•¼ í•˜ë©°, ìë™í™”ë¡œ ì¸í•œ ê³„ì • ì •ì§€ ë¦¬ìŠ¤í¬ëŠ” ì‚¬ìš©ìì—ê²Œ ìˆìŠµë‹ˆë‹¤.

---

**ë¬¸ì„œ ë** | ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-12-27
